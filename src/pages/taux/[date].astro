---
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import data from '../../data.json';

export async function getStaticPaths() {
  return data.map((item) => {
    return {
      params: { date: item.date },
      props: { 
        current: item,
        dateFormatted: new Date(item.date).toLocaleDateString('fr-FR', {
          weekday: 'long',
          year: 'numeric', 
          month: 'long',
          day: 'numeric'
        })
      }
    };
  });
}

const { current, dateFormatted } = Astro.props;
---

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taux du {current.date} : {current.rate} DZD - Site Test FranÃ§ais</title>
    <meta name="description" content="Test page franÃ§aise du {current.date}">
</head>

<body>
    <Header />
    <main style="padding: 2rem; max-width: 800px; margin: 0 auto;">
        <h1>ğŸ“ˆ Taux du {current.date}</h1>
        <p><strong>Date:</strong> {dateFormatted}</p>
        <p><strong>Taux:</strong> {current.rate} DZD</p>
        <p>Cette page franÃ§aise devrait s'afficher correctement.</p>
    </main>
    <Footer />
</body>
</html>